(function(e){function t(t){for(var n,c,i=t[0],o=t[1],s=t[2],l=0,f=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);p&&p(t);while(f.length)f.shift()();return u.push.apply(u,s||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,i=1;i<r.length;i++){var o=r[i];0!==a[o]&&(n=!1)}n&&(u.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},u=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/twitch-multi-player-reactive/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var p=o;u.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},b07e:function(e,t,r){"use strict";r("ce12")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(e,t,r,a,u,c){var i=Object(n["l"])("ThePlayers");return Object(n["i"])(),Object(n["d"])(i)}r("99af"),r("b0c0");var u={style:{"white-space":"nowrap"}},c=Object(n["f"])("p",null,"URIで配信者の名前を指定してください。",-1),i={key:0};function o(e,t,r,a,o,s){return Object(n["i"])(),Object(n["d"])("div",u,[0===e.streamerNames.length?(Object(n["i"])(),Object(n["d"])(n["a"],{key:0},[c,Object(n["f"])("p",null,"例: "+Object(n["m"])(e.origin)+"/?streamer=streamerA,streamerB,streamerC",1)],64)):(Object(n["i"])(!0),Object(n["d"])(n["a"],{key:1},Object(n["k"])(e.liveStreamers,(function(t,r){return Object(n["i"])(),Object(n["d"])(n["a"],{key:t.id},[Object(n["f"])("iframe",{src:"https://player.twitch.tv/?channel=".concat(t.name,"&parent=").concat(e.hostname,"&autoplay=true"),height:e.layout.unitHeight,width:e.layout.unitWidth,allowfullscreen:!0,frameborder:!1},"\n        ",8,["src","height","width"]),(r+1)%e.layout.cols===0?(Object(n["i"])(),Object(n["d"])("br",i)):Object(n["e"])("",!0)],64)})),128))])}var s,p=r("1da1"),l=(r("96cf"),r("ac1f"),r("841c"),r("d81d"),r("a9e3"),r("4de4"),r("72bf")),f=r.n(l),h=r("bc3a"),m=r.n(h);function b(){var e=new XMLHttpRequest;e.open("GET","./config.json",!1),e.setRequestHeader("content-type","application/json"),e.send();var t=JSON.parse(e.responseText);return m.a.create({baseURL:t.API_ENDPOINT})}function d(){return s||(s=b()),s}function v(){return w.apply(this,arguments)}function w(){return w=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d().get("config");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function O(e){return g.apply(this,arguments)}function g(){return g=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d().put("streamers/".concat(t,"/monitoring"));case 2:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function j(e,t,r){var n=Math.ceil(Math.sqrt(r)),a=n,u=Math.floor(e/a),c=Math.floor(t/n);return{rows:n,cols:a,unitWidth:u,unitHeight:c}}r("caad"),r("2532");var y=r("782e"),x=r.n(y);function k(e,t,r){var n=["stream.online","stream.offline"];x.a.logToConsole=!0;var a=new x.a(e.key,{cluster:e.cluster}),u=a.subscribe(e.channel);return u.bind(e.event,function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(a){var u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=a.notification,c=u.streamerName.toLowerCase(),n.includes(u.type)){e.next=4;break}return e.abrupt("return");case 4:if(t.includes(c)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,r();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a}function R(e){return P.apply(this,arguments)}function P(){return P=Object(p["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={name:t},e.next=3,d().get("streamers",{params:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function S(){var e,t=f.a.parse(location.search,{arrayFormat:"comma"}),r=[].concat(null!==(e=t["streamer"])&&void 0!==e?e:[]).map((function(e){return e.toLowerCase()})),n=Number(t["width"]||window.innerWidth),a=Number(t["height"]||window.innerHeight);return{streamer:r,width:n,height:a}}function M(e){var t=Object(n["j"])({data:[]}),r=Object(n["b"])((function(){return t.value.data.map((function(e){return{id:e.id,name:e.name.toLowerCase(),isLive:e.is_live}}))})),a=function(){var r=Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,R(e);case 2:t.value=r.sent;case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return{streamers:r,reloadStreamers:a}}var N=Object(n["g"])({name:"the-players",setup:function(){var e=S(),t=location.origin,r=location.hostname,a=e.streamer,u=M(e.streamer),c=u.streamers,i=u.reloadStreamers,o=Object(n["b"])((function(){return c.value.filter((function(e){return e.isLive}))})),s=Object(n["b"])((function(){return j(e.width,e.height,o.value.length)}));return Object(n["h"])(Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,k(t.pusher,a,Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)})))),e.next=6,i();case 6:return e.next=8,c.value.map((function(e){return O(e.id)}));case 8:case"end":return e.stop()}}),e)})))),{origin:t,hostname:r,streamerNames:a,liveStreamers:o,layout:s}}});N.render=o;var T=N,_=Object(n["g"])({name:"App",components:{ThePlayers:T}});r("b07e");_.render=a;var L=_;Object(n["c"])(L).mount("#app")},ce12:function(e,t,r){}});
//# sourceMappingURL=app.c1e92716.js.map